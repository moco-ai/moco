# スラッシュコマンドの実装完了

CLI機能強化として、対話モード中に使用可能なスラッシュコマンドを実装しました。

## 実装内容

1.  **コマンドハンドラの新設**: `src/moco/cli_commands.py` を作成し、各コマンドの処理ロジックを分離しました。
2.  **CLIへの組み込み**: `src/moco/cli.py` の `chat` コマンドを修正し、`/` で始まる入力をコマンドとして処理するようにしました。
3.  **主要コマンドの実装**:
    *   `/help`: 利用可能なコマンド一覧を `rich.table` で綺麗に表示。
    *   `/clear`: 現在の履歴をクリアし、新しいセッションを開始。
    *   `/model`: 現在のモデルの表示および変更。変更は配下のエージェントのランタイムにも伝播します。
    *   `/profile`: プロファイルの切り替え。エージェント構成の再読み込みを伴います。
    *   `/session`: セッションID、プロファイル、モデル、プロバイダなどの詳細情報を表示。
    *   `/theme`: UIカラーテーマの動的切り替え。
    *   `/tools` / `/agents`: 利用可能なリソースのリスト表示。
    *   `/quit` / `/exit`: チャットの終了。
    *   `/workdir`: 作業ディレクトリの管理（表示・変更・ブックマーク）。
    *   `/cd`: ディレクトリの移動（`/workdir set` の短縮形）。ブックマーク名での移動にも対応。
    *   `/ls`: 現在（または指定した）ディレクトリのファイル一覧表示。
    *   `/tree`: ディレクトリ構造をツリー形式で表示。
4.  **堅牢性の向上**:
    *   `shlex` による引数パースにより、スペースを含む引数（モデル名など）に対応。
    *   対話モード中の `run_sync` 実行時に `Ctrl+C` を押すと、内部のキャンセルイベントが発火し、安全に中断して待機状態に戻るよう改善しました。

## レビュー対応
`@code-reviewer` による指摘に基づき、以下の点を修正済みです。
*   ランタイム側の属性名 `model_name` への対応（`AttributeError` 回避）。
*   `optimizer_config` のプロファイル同期。
*   Enum 値の表示形式の改善。
*   キャンセル処理の統合による状態整合性の確保。

これにより、Moco CLI のユーザビリティと操作性が Claude Code などと同等のレベルに強化されました。
